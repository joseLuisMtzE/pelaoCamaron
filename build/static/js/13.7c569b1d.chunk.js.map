{"version":3,"sources":["shared/Alert.js","../node_modules/antd/es/row/index.js","../node_modules/antd/es/col/index.js","components/CloseOrder/ModalCloseOrder.jsx","components/CloseOrder/CloseOrder.jsx","../node_modules/@ant-design/icons-svg/es/asn/LoadingOutlined.js","../node_modules/@ant-design/icons/es/icons/LoadingOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/DollarCircleOutlined.js","../node_modules/@ant-design/icons/es/icons/DollarCircleOutlined.js","components/Discounts/Discount.jsx","../node_modules/@ant-design/icons-svg/es/asn/ExclamationCircleOutlined.js","../node_modules/@ant-design/icons/es/icons/ExclamationCircleOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/DeleteFilled.js","../node_modules/@ant-design/icons/es/icons/DeleteFilled.js","../node_modules/@ant-design/icons-svg/es/asn/PlusOutlined.js","../node_modules/@ant-design/icons/es/icons/PlusOutlined.js","assets/backgroundYellow","assets/backgroundRed","../node_modules/@ant-design/icons-svg/es/asn/EditFilled.js","../node_modules/@ant-design/icons/es/icons/EditFilled.js","components/OrderView/Order.jsx","../node_modules/@ant-design/icons-svg/es/asn/HomeOutlined.js","../node_modules/@ant-design/icons/es/icons/HomeOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/PrinterOutlined.js","../node_modules/@ant-design/icons/es/icons/PrinterOutlined.js","pages/OrderView.jsx"],"names":["alertError","message","Swal","fire","icon","title","text","alertSuccess","Row","Col","CloseOrder","props","loading","total","cambio","onFinishForm","Option","Select","Form","useForm","form","useEffect","setFieldsValue","porcentajeDescuento","name","onFinish","values","console","log","onFinishFailed","errorInfo","Item","label","rules","required","placeholder","value","prefix","suffix","Numeral","format","type","htmlType","ModalCloseAC","id","ordenTotal","useState","modalVisible","setModalVisible","setLoading","setCambio","closeOrderAndGetTicket","payload","a","makeRequest","response","data","successAlert","errorAlert","className","shape","onClick","CloseOutlined","visible","onCancel","footer","ModalCloseOrder","tipoPago","parseInt","pagoCon","parseFloat","subTotal","LoadingOutlined","ref","React","AntdIcon","Object","assign","LoadingOutlinedSvg","displayName","DollarCircleOutlined","DollarCircleOutlinedSvg","Discount","orderId","state","setState","porDiscount","setporDiscount","setSubTotal","handleOk","sendDiscount","handleCancel","porcentaje","discount","pago","status","error","onOk","key","danger","initialValues","remember","whitespace","validator","_","Promise","resolve","reject","onChange","e","target","ExclamationCircleOutlined","ExclamationCircleOutlinedSvg","DeleteFilled","DeleteFilledSvg","PlusOutlined","PlusOutlinedSvg","module","exports","EditFilled","EditFilledSvg","Order","order","getOrders","setVisible","cantidad","newCount","setNewCount","editarComanda","_id","platillo","estado","observaciones","orden","editComandaRequest","cancelar","idComanda","idPlatillo","idOrden","style","padding","nombre","precioSinIva","toFixed","precioConIva","background","border","defaultValue","min","marginTop","HomeOutlined","HomeOutlinedSvg","PrinterOutlined","PrinterOutlinedSvg","OrderView","mesaID","localStorage","getItem","noMesa","isEmpty","setIsEmpty","orders","setOrders","precioTotal","setTotal","setId","tipoOrden","setTipoOrden","comandas","length","window","history","replaceState","initState","map","x","y","index","splice","forEach","xs","src","BackgroundYellow","alt","textAlign","top","position","spin","md","zIndex","borderRadius","to","pathname","BackgroundRed"],"mappings":"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","file":"static/js/13.7c569b1d.chunk.js","sourcesContent":["import Swal from 'sweetalert2';\r\n\r\n    export function alertError(message){\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title:'Error' ,\r\n            text: message\r\n           // footer: '<a href>Why do I have this issue?</a>'\r\n        })\r\n    }\r\n\r\n    export function alertSuccess(message){\r\n        Swal.fire({\r\n            icon: 'success',\r\n            title: 'Proceso exitoso!',\r\n            text: message\r\n           // footer: '<a href>Why do I have this issue?</a>'\r\n        })\r\n    }\r\n\r\n \r\n","import { Row } from '../grid';\nexport default Row;","import { Col } from '../grid';\nexport default Col;","import React, { useEffect } from 'react';\r\nimport * as Numeral from 'numeral';\r\nimport { Form, Button, Select, Input } from 'antd';\r\n\r\nconst CloseOrder = props => {\r\n  const { loading, total, cambio, onFinishForm } = props;\r\n  const { Option } = Select;\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue({ porcentajeDescuento: '0' });\r\n  });\r\n\r\n  const onFinish = values => {\r\n    console.log('Success:', values);\r\n    onFinishForm(values);\r\n  };\r\n\r\n  const onFinishFailed = errorInfo => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form\r\n        name=\"paymentInfo\"\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        form={form}\r\n      >\r\n        <Form.Item\r\n          label=\"Forma de pago\"\r\n          name=\"tipoPago\"\r\n          rules={[{ required: true, message: 'Elije una forma de pago!' }]}\r\n        >\r\n          <Select placeholder=\"Selecciona un método de pago\">\r\n            <Option value=\"Efectivo\">Efectivo</Option>\r\n            <Option value=\"Tarjeta\">Tarjeta</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"Pagó con:\"\r\n          name=\"pagoCon\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa la cantidad con la que te pagó el cliente!'\r\n            }\r\n          ]}\r\n        >\r\n          <Input\r\n            placeholder=\"Cantidad con la que pagó el cliente\"\r\n            prefix=\"$\"\r\n            suffix=\"MXN\"\r\n          />\r\n        </Form.Item>\r\n        <Form.Item label=\"\" name=\"porcentajeDescuento\">\r\n         \r\n        </Form.Item>\r\n        <h3>Total: {Numeral(total).format('$0,0.00')}</h3>\r\n        <h3>Cambio: {Numeral(cambio).format('$0,0.00')}</h3>\r\n\r\n        <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n          Pagar\r\n        </Button>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CloseOrder;\r\n","import React, { useState } from 'react';\r\n\r\n//! Components\r\nimport ModalCloseOrder from './ModalCloseOrder';\r\nimport { Modal, Button } from 'antd';\r\n\r\n//! Constants\r\n// import url from '../../constants/api';\r\n\r\nimport { errorAlert, successAlert } from '../../shared/Alerts';\r\n\r\nimport { CloseOutlined } from '@ant-design/icons';\r\nimport { makeRequest } from '../../shared/ApiWrapper';\r\n\r\nfunction ModalCloseAC({ id, ordenTotal }) {\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [cambio, setCambio] = useState(0);\r\n  const total = ordenTotal;\r\n\r\n  const closeOrderAndGetTicket = async (id, payload) => {\r\n    try {\r\n      setLoading(true);\r\n      let response = await makeRequest('POST', `ordenes/${id}/ticket`, payload);\r\n      let data = response.data.data;\r\n      console.log('Response: ', response, 'Data: ', data);\r\n      setLoading(false);\r\n      successAlert('Pago realizado', 'Generando ticket...');\r\n    } catch (err) {\r\n      setLoading(false);\r\n      errorAlert('Oops...', 'Algo salió mal al generar el ticket verifica que las ordenes estén cerradas');\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setModalVisible(false);\r\n  };\r\n\r\n  const onFinishForm = values => {\r\n    console.log('Form submitted, values recieved are: ', values);\r\n    closeOrderAndGetTicket(id, {\r\n      tipoPago: values.tipoPago,\r\n      porcentajeDescuento: parseInt(values.porcentajeDescuento),\r\n      pagoCon: parseFloat(values.pagoCon),\r\n      subTotal: total\r\n    });\r\n    setCambio(\r\n      parseFloat(values.pagoCon) -\r\n        total * (1 - parseInt(values.porcentajeDescuento) / 100)\r\n    );\r\n  };\r\n\r\n  //--------FORM\r\n  return (\r\n    <>\r\n      {/* <div className=\"close-order__wrapper\"> */}\r\n      {/* <Button\r\n          type=\"primary\"\r\n          className=\"close-order_btn\"\r\n          onClick={() => {\r\n            setModalVisible(true);\r\n          }}\r\n        >\r\n          Cerrar cuenta\r\n        </Button> */}\r\n      <div className=\"center\">\r\n        <Button\r\n          shape=\"circle\"\r\n          className=\"close-btn\"\r\n          onClick={() => {\r\n            setModalVisible(true);\r\n          }}\r\n        >\r\n          <CloseOutlined className=\"normal-size\" />\r\n        </Button>\r\n        <p>Cerrar orden </p>\r\n      </div>\r\n      <Modal\r\n        title=\"CERRAR ORDEN\"\r\n        visible={modalVisible}\r\n        onCancel={handleCancel}\r\n        footer={''}\r\n      >\r\n        <ModalCloseOrder\r\n          total={total}\r\n          cambio={cambio}\r\n          loading={loading}\r\n          onFinishForm={onFinishForm}\r\n        />\r\n      </Modal>\r\n      {/* </div> */}\r\n    </>\r\n  );\r\n}\r\nexport default ModalCloseAC;\r\n","// This icon file is generated automatically.\nvar LoadingOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\" } }] }, \"name\": \"loading\", \"theme\": \"outlined\" };\nexport default LoadingOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LoadingOutlinedSvg from \"@ant-design/icons-svg/es/asn/LoadingOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar LoadingOutlined = function LoadingOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: LoadingOutlinedSvg\n  }));\n};\n\nLoadingOutlined.displayName = 'LoadingOutlined';\nexport default React.forwardRef(LoadingOutlined);","// This icon file is generated automatically.\nvar DollarCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z\" } }] }, \"name\": \"dollar-circle\", \"theme\": \"outlined\" };\nexport default DollarCircleOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DollarCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/DollarCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DollarCircleOutlined = function DollarCircleOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: DollarCircleOutlinedSvg\n  }));\n};\n\nDollarCircleOutlined.displayName = 'DollarCircleOutlined';\nexport default React.forwardRef(DollarCircleOutlined);","import React, { useState, useEffect } from 'react';\r\nimport { Modal, Button, Input, Form } from 'antd';\r\nimport { makeRequest } from '../../shared/ApiWrapper';\r\nimport { alertError, alertSuccess } from '../../shared/Alert';\r\n\r\n//icon\r\nimport { DollarCircleOutlined } from '@ant-design/icons';\r\n\r\nconst Discount = ({ orderId, total }) => {\r\n  const [state, setState] = useState({ visible: false });\r\n  const [porDiscount, setporDiscount] = useState(0);\r\n  // const [total, setTotal] = useState(0);\r\n  const [subTotal, setSubTotal] = useState(0);\r\n  const id = orderId;\r\n\r\n  //5ecc7e7ef1dd0a0004a6b938\r\n  const [form] = Form.useForm();\r\n\r\n  //funciones para la modal\r\n  const showModal = () => {\r\n    setState({\r\n      visible: true\r\n    });\r\n  };\r\n\r\n  const handleOk = () => {\r\n    setState({ visible: false });\r\n    sendDiscount(porDiscount);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setState({ visible: false });\r\n    setporDiscount(0);\r\n    form.setFieldsValue({ porcentaje: 0 });\r\n  };\r\n\r\n  //Guardado del valor del descuento\r\n  const porDiscountChange = e => {\r\n    setporDiscount(e.target.value);\r\n    // console.log(porDiscount);\r\n  };\r\n\r\n  //Cambio del subtotal dependiendo el porcentaje de descuento\r\n  const result = discount => {\r\n    const porcentaje = (discount * total) / 100;\r\n    const resultado = total - porcentaje;\r\n    setSubTotal(resultado);\r\n  };\r\n\r\n  useEffect(() => {\r\n    result(porDiscount);\r\n    // console.log(orderId);\r\n  }, [porDiscount]);\r\n\r\n  /* useEffect(() => {\r\n    // getTotal();\r\n    console.log('Re render');\r\n  }, []);*/\r\n\r\n  //peticion para obtener el total\r\n  // const getTotal = async () => {\r\n  //   try {\r\n  //     let response = await makeRequest('GET', `ordenes/${id}`);\r\n  //     let data = response.data.data.pago.precioTotal;\r\n  //     setTotal(data);\r\n  //     console.log(data);\r\n  //     //return data;\r\n  //   } catch (err) {\r\n  //     console.log(err);\r\n  //   }\r\n  // };\r\n\r\n  //peticion para hacer la actualizacion del porcentaje descuento\r\n  const sendDiscount = async (discount) => {\r\n    try {\r\n      let response = await makeRequest('PUT', `ordenes/${id}`, {\r\n        pago: {\r\n          porcentajeDescuento: discount,\r\n        },\r\n      });\r\n      console.log(response);\r\n      if (response && response.status && response.status === 200) {\r\n        alertSuccess('Descuento aplicado correctamente');\r\n      } else {\r\n        alertError('Hubo un error al aplicar el descuento');\r\n      }\r\n      setporDiscount(0);\r\n      form.setFieldsValue({ porcentaje: 0 });\r\n    } catch (err) {\r\n      console.log(err);\r\n      alertError(err.error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <Button shape=\"circle\" className=\"discount-btn\" onClick={showModal}>\r\n          <DollarCircleOutlined className=\"normal-size\" />\r\n        </Button>\r\n        <p>Agregar descuento</p>\r\n        {/* <Button type=\"primary\" onClick={showModal}>\r\n          Descuento\r\n        </Button> */}\r\n        <Modal\r\n          title=\"Descuento\"\r\n          visible={state.visible}\r\n          onOk={handleOk}\r\n          onCancel={handleCancel}\r\n          footer={[\r\n            <Button key=\"back\" onClick={handleCancel} type=\"primary\" danger>\r\n              Cancelar\r\n            </Button>,\r\n            <Button key=\"submit\" type=\"primary\" onClick={handleOk}>\r\n              Aceptar\r\n            </Button>\r\n          ]}\r\n        >\r\n          <div className=\"Descuentos\">\r\n            <Form\r\n              form={form}\r\n              name=\"Discounts\"\r\n              initialValues={{ remember: true }}\r\n            >\r\n              <Form.Item\r\n                name=\"porcentaje\"\r\n                label=\"% Porcentaje a Descontar\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: 'Por favor ingresa un porcentaje correcto',\r\n                    whitespace: true,\r\n                    validator: (_, value) =>\r\n                      value >= 0 && value <= 100\r\n                        ? Promise.resolve()\r\n                        : Promise.reject('El porcentaje debe ser entre 0 y 100')\r\n                  }\r\n                ]}\r\n              >\r\n                <Input\r\n                  type=\"number\"\r\n                  onChange={porDiscountChange}\r\n                  value={porDiscount}\r\n                />\r\n              </Form.Item>\r\n            </Form>\r\n            <p></p>\r\n            <p>Total anterior ${total}</p>\r\n            <hr />\r\n            <p></p>\r\n            <p>Total nuevo ${subTotal}</p>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Discount;\r\n","// This icon file is generated automatically.\nvar ExclamationCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z\" } }] }, \"name\": \"exclamation-circle\", \"theme\": \"outlined\" };\nexport default ExclamationCircleOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ExclamationCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/ExclamationCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar ExclamationCircleOutlined = function ExclamationCircleOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: ExclamationCircleOutlinedSvg\n  }));\n};\n\nExclamationCircleOutlined.displayName = 'ExclamationCircleOutlined';\nexport default React.forwardRef(ExclamationCircleOutlined);","// This icon file is generated automatically.\nvar DeleteFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z\" } }] }, \"name\": \"delete\", \"theme\": \"filled\" };\nexport default DeleteFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteFilledSvg from \"@ant-design/icons-svg/es/asn/DeleteFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteFilled = function DeleteFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: DeleteFilledSvg\n  }));\n};\n\nDeleteFilled.displayName = 'DeleteFilled';\nexport default React.forwardRef(DeleteFilled);","// This icon file is generated automatically.\nvar PlusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z\" } }] }, \"name\": \"plus\", \"theme\": \"outlined\" };\nexport default PlusOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusOutlined = function PlusOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: PlusOutlinedSvg\n  }));\n};\n\nPlusOutlined.displayName = 'PlusOutlined';\nexport default React.forwardRef(PlusOutlined);","module.exports = __webpack_public_path__ + \"static/media/backgroundYellow.d7e812ca.bin\";","module.exports = __webpack_public_path__ + \"static/media/backgroundRed.7d646f35.bin\";","// This icon file is generated automatically.\nvar EditFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z\" } }] }, \"name\": \"edit\", \"theme\": \"filled\" };\nexport default EditFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EditFilledSvg from \"@ant-design/icons-svg/es/asn/EditFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EditFilled = function EditFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: EditFilledSvg\n  }));\n};\n\nEditFilled.displayName = 'EditFilled';\nexport default React.forwardRef(EditFilled);","import React, { useState } from 'react';\r\nimport { Button, Modal,InputNumber  } from 'antd';\r\nimport { EditFilled } from '@ant-design/icons';\r\nimport {alertSuccess,alertError} from '../../shared/Alert';\r\nimport { makeRequest } from '../../shared/ApiWrapper';\r\nimport {\r\n  DeleteFilled\r\n} from '@ant-design/icons';\r\n\r\nexport default function Order({ order, getOrders }) {\r\n\r\n  const [visible, setVisible] = useState(false);\r\n  const [newCount,setNewCount] = useState(order.cantidad);\r\n\r\n  const showModal = () => {\r\n    setVisible(true);\r\n  };\r\n\r\n  const handleOk = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  const onChange = (value)=>{\r\n    setNewCount(value);\r\n  }\r\n\r\n  const editarComanda = async ()=>{\r\n    order.cantidad = newCount;\r\n    console.log(order._id,order.platillo._id,newCount,order.estado,order.observaciones,order.orden)\r\n    await editComandaRequest(order._id,order.platillo._id,newCount,order.estado,order.observaciones,order.orden);\r\n    setVisible(false);\r\n    await getOrders()\r\n  }\r\n\r\n  const cancelar = async ()=>{\r\n    console.log('Cancelado xd');\r\n    await editComandaRequest(order._id,order.platillo._id,newCount,'Cancelada',order.observaciones,order.orden);\r\n    await getOrders()\r\n  }\r\n\r\n  const editComandaRequest = async (idComanda,idPlatillo,cantidad,estado,observaciones,idOrden) => {\r\n    try {\r\n      let response = await makeRequest('PUT',`comandas/${idComanda}`,{\r\n        'platillo': idPlatillo,\r\n        'cantidad':cantidad,\r\n        'estado': estado,\r\n        'observaciones': observaciones,\r\n        'orden':idOrden\r\n      })\r\n\r\n      if (response.status === 200) {\r\n        alertSuccess('Comanda editada correctamente');\r\n      } else {\r\n        alertError('Hubo un error al editar la comanda');\r\n      }\r\n\r\n      let data = response.data.data;\r\n      return data;\r\n    } catch (err) {\r\n      console.log(err);\r\n      alertError('Hubo un error al editar la comanda');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <tr style={{ padding: 20 }}>\r\n      <td>{order.platillo.nombre}</td>\r\n      <td>{order.cantidad}</td>\r\n      <td>{order.estado}</td>\r\n      <td>${order.platillo.precioSinIva.toFixed(2)}</td>\r\n      <td>${order.platillo.precioConIva.toFixed(2)}</td>\r\n      <td>\r\n        <Button\r\n          type=\"primary\"\r\n          style={{ background: 'orange', border: 'none' }}\r\n          onClick={showModal}\r\n        >\r\n          <EditFilled />\r\n        </Button>\r\n      </td>\r\n      <Modal\r\n        footer={null}\r\n        title=\"Editar comanda\"\r\n        visible={visible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n      >\r\n        <table className=\"table left\">\r\n          <thead>\r\n            <tr>\r\n              <th>Nombre</th>\r\n              <th>Cantidad</th>\r\n              <th>Total</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>{order.platillo.nombre}</td>\r\n              <InputNumber defaultValue={order.cantidad} onChange={onChange} min={0}></InputNumber>\r\n              <td>${(order.platillo.precioConIva/order.cantidad * newCount).toFixed(2)}</td>\r\n              <td><Button onClick={cancelar} type=\"primary\" danger>\r\n                <DeleteFilled />\r\n              </Button></td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <Button \r\n          onClick={editarComanda}\r\n          type=\"primary\"\r\n          style={{ background: 'orange', border: 'none',marginTop:30 }}>Editar</Button>\r\n      </Modal>\r\n    </tr>\r\n  );\r\n}\r\n","// This icon file is generated automatically.\nvar HomeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z\" } }] }, \"name\": \"home\", \"theme\": \"outlined\" };\nexport default HomeOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport HomeOutlinedSvg from \"@ant-design/icons-svg/es/asn/HomeOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar HomeOutlined = function HomeOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: HomeOutlinedSvg\n  }));\n};\n\nHomeOutlined.displayName = 'HomeOutlined';\nexport default React.forwardRef(HomeOutlined);","// This icon file is generated automatically.\nvar PrinterOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z\" } }] }, \"name\": \"printer\", \"theme\": \"outlined\" };\nexport default PrinterOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PrinterOutlinedSvg from \"@ant-design/icons-svg/es/asn/PrinterOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PrinterOutlined = function PrinterOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: PrinterOutlinedSvg\n  }));\n};\n\nPrinterOutlined.displayName = 'PrinterOutlined';\nexport default React.forwardRef(PrinterOutlined);","import React, { useState, useEffect } from 'react';\r\nimport { Col, Row, Button } from 'antd';\r\nimport BackgroundYellow from '../assets/backgroundYellow';\r\nimport { LoadingOutlined } from '@ant-design/icons';\r\nimport BackgroundRed from '../assets/backgroundRed';\r\nimport { makeRequest } from '../shared/ApiWrapper';\r\nimport Order from '../components/OrderView/Order';\r\nimport {\r\n  PlusOutlined,\r\n  PrinterOutlined,\r\n  // DollarCircleOutlined,\r\n  HomeOutlined,\r\n  ExclamationCircleOutlined,\r\n  CloseOutlined,\r\n} from '@ant-design/icons';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport Discount from '../components/Discounts/Discount';\r\nimport CloseOrder from '../components/CloseOrder/CloseOrder';\r\n\r\nconst OrderView = props => {\r\n  const mesaID = localStorage.getItem('mesaID');\r\n  const noMesa = localStorage.getItem('noMesa');\r\n  const [isEmpty,setIsEmpty] = useState(false);\r\n\r\n  const [orders, setOrders] = useState([]);\r\n  const [total, setTotal] = useState({\r\n    subTotal: 0,\r\n    precioTotal: 0\r\n  });\r\n  const [id, setId] = useState('');\r\n  const [tipoOrden, setTipoOrden] = useState('Local');\r\n\r\n  const getOrders = async () => {\r\n    try {\r\n      let response = await makeRequest('GET', `mesas/${mesaID}/ordenes`);\r\n      let data = response.data.data;\r\n      if(data[0].comandas.length==0){\r\n        console.log('VACIO');\r\n        setIsEmpty(true);\r\n      }\r\n      setOrders(data[0].comandas);\r\n      setTotal(data[0].pago);\r\n      if (response.status === 200) {\r\n        // localStorage.setItem('orderID',data[0]._id);\r\n\r\n        setTipoOrden(data[0].tipoOrden);\r\n        setId(data[0]._id);\r\n        window.history.replaceState(\r\n          null,\r\n          null,\r\n          'http://localhost:3000/ver-orden/' + data[0]._id\r\n        );\r\n      }\r\n      return data;\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const initState = async () => {\r\n      await getOrders();\r\n    };\r\n    initState();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    /*Esto lo que hace es sumar los precios de platillos repetidos, sumar la cantidad de platillos repetidos y eliminar el platillo repetido*/\r\n    orders.map(x => {\r\n      orders.map((y, index) => {\r\n        if (x && x.platillo._id === y.platillo._id && x !== y) {\r\n          x.cantidad += y.cantidad;\r\n          orders.splice(index, 1);\r\n        }\r\n        return null;\r\n      });\r\n      return null;\r\n    });\r\n    orders.forEach(order => {\r\n      order.platillo.precioConIva *= order.cantidad;\r\n      order.platillo.precioSinIva *= order.cantidad;\r\n    });\r\n  }, [orders]);\r\n\r\n  console.log(orders);\r\n  return (\r\n    <div>\r\n      <Row>\r\n        <Col xs={24}>\r\n          <img src={BackgroundYellow} alt=\"bg\" className=\"bg-img\" />\r\n          <h1 className=\"h1\">Orden - Mesa {noMesa}</h1>\r\n          {orders.length === 0 && isEmpty ==false? (\r\n            <div\r\n              style={{ textAlign: 'center', top: 200, position: 'relative' }}\r\n            >\r\n              <LoadingOutlined className=\"big-size\" spin />\r\n            </div>\r\n          ) : null}\r\n          {\r\n            isEmpty && (\r\n              <div\r\n                style={{ textAlign: 'center', top: 0, position: 'relative' }}\r\n              >\r\n                <ExclamationCircleOutlined className=\"big-size\"/><br/>\r\n                No hay ordenes\r\n              </div>\r\n            )\r\n          }\r\n        </Col>\r\n        <Col xs={24} md={18} style={{ zIndex: 10 }}>\r\n          {orders.length !== 0 && (\r\n            <section\r\n              style={{\r\n                background: 'white',\r\n                padding: 25,\r\n                borderRadius: 15\r\n              }}\r\n            >\r\n              <table className=\"table\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th>Nombre</th>\r\n                    <th>Cantidad</th>\r\n                    <th>Estado</th>\r\n                    <th>Sub-total</th>\r\n                    <th>Total</th>\r\n                    <th></th>\r\n                  </tr>\r\n                  {orders.map((order, index) => (\r\n                    <Order order={order} key={index} getOrders={getOrders} />\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </section>\r\n          )}\r\n          <section\r\n            style={{\r\n              background: 'white',\r\n              padding: 15,\r\n              borderRadius: 15,\r\n              marginTop: 20\r\n            }}\r\n          >\r\n            <h3 style={{ textAlign: 'center' }}>Subtotal: ${total.subTotal.toFixed(2)}</h3>\r\n            <h3 style={{ textAlign: 'center' }}>\r\n              Total: <span className=\"total\">${total.precioTotal.toFixed(2)}</span>\r\n            </h3>\r\n          </section>\r\n        </Col>\r\n        \r\n        <Col xs={24} md={6} style={{ zIndex: 10 }}>\r\n          <div className=\"center margin-top\">\r\n            <Button shape=\"circle\" className=\"add-btn\">\r\n              <Link to={`/agregar-platillos/${id}`}>\r\n                <PlusOutlined className=\"normal-size\" />\r\n              </Link>\r\n            </Button>\r\n            <p>Agregar platillo</p>\r\n          </div>\r\n          <CloseOrder id={id} ordenTotal={total.precioTotal} />\r\n          \r\n         \r\n            {tipoOrden === 'Domicilio' && (\r\n              <div className=\"center\">\r\n                <Button shape=\"circle\" className=\"edit-btn\">\r\n                  <Link to={{\r\n                pathname:\"/edit-home-delivery\",\r\n                state:{\r\n                  'idMesa':mesaID\r\n                }\r\n              }}>\r\n                    <HomeOutlined className=\"normal-size\" />\r\n                  </Link>\r\n                </Button>\r\n                <p>Editar Domicilio</p>\r\n              </div>\r\n            )}\r\n\r\n          <div className=\"center\">\r\n            <Discount orderId={id} total={total.precioTotal} />\r\n          </div>\r\n\r\n          <div className=\"center alot-margin-bottom\">\r\n            <Button shape=\"circle\" className=\"print-btn\">\r\n              <Link to={`/ticket/${id}`}>\r\n                <PrinterOutlined className=\"normal-size\" />\r\n              </Link>\r\n            </Button>\r\n            <p>Imprimir Ticket</p>\r\n          </div>\r\n        </Col>\r\n        \r\n        <Col xs={24}>\r\n          <img src={BackgroundRed} alt=\"bg\" className=\"bg-img bottom\" />\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\nexport default OrderView;\r\n"],"sourceRoot":""}