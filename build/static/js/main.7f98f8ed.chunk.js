(this.webpackJsonpposrestfront=this.webpackJsonpposrestfront||[]).push([[7],{10:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return b}));var n=a(6),r=a.n(n),c=a(13),o=a(186),l=a.n(o),i=a(89),s=a(187),u=a.n(s),m=a(92);function d(){if(localStorage.getItem("token"))return localStorage.getItem("token")}function p(){if(localStorage.getItem("token"))return u()(d()).user.rol}function f(){return!!localStorage.getItem("token")}var b=function(){var e=Object(c.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==t){e.next=3;break}return e.abrupt("return",Error("Falta metodo de la petici\xf3n"));case 3:if(void 0!==a){e.next=5;break}return e.abrupt("return",Error("Falta complento del url de la petici\xf3n"));case 5:return e.next=7,l()({method:t,url:i.b.apiEndPoint+a,data:n,headers:{Authorization:"Bearer "+d()}});case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(0),e.t0&&e.t0.response&&401===e.t0.response.status&&(console.log("Unauthorized"),Object(m.b)("Autenticaci\xf3n fallida","Redirigiendo...",(function(){return window.location.href="/"}))),!(e.t0&&e.t0.response&&400===e.t0.response.status||e.t0&&e.t0.response&&404===e.t0.response.status)){e.next=15;break}return e.abrupt("return",e.t0);case 15:if(!e.t0||!e.t0.response||500!==e.t0.response.status){e.next=18;break}return Object(m.b)("Oops...","Hubo un error"),e.abrupt("return",e.t0);case 18:console.log("ERROR",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}()},188:function(e,t,a){e.exports=a.p+"static/media/camarones.7839ebe6.jpg"},190:function(e,t,a){e.exports=a.p+"static/media/newComandaSound.51377e11.mp3"},206:function(e,t,a){"use strict";var n=a(6),r=a.n(n),c=a(43),o=a(13),l=a(26),i=a(0),s=a.n(i),u=a(410),m=a(411),d=a(16),p=a(412),f=a(64),b=a(60),E=a(89),h=a(189),v=a.n(h),O=a(190),x=a.n(O),g=a(10),j=v()(E.a.url);t.a=function(e){var t,a=e.comandas,n=e.areas,E=Object(i.useState)([]),h=Object(l.a)(E,2),v=h[0],O=h[1],C=Object(i.useState)(""),N=Object(l.a)(C,2),k=N[0],y=N[1],w=Object(i.useState)(""),A=Object(l.a)(w,2),S=A[0],T=A[1],M=Object(i.useRef)(),z="",B="",P=[],D=new Audio(x.a),R=function(){var e=Object(o.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Joined called with room: ",a),j.emit("joinRoom",a),j.on("joinedToRoom",(function(e){console.log("Conectadado correctamente, datos recibidos: ",e)})),j.on("nuevaComanda",(function(e){var a=M.current;console.log("Nueva comanda creada!!",e),O((function(t){return[].concat(Object(c.a)(t),[e])})),a.scrollTo(a.scrollWidth,0),a.children[a.children.length-1].classList.add("blink"),t=setTimeout((function(){a.children[a.children.length-1].classList.remove("blink")}),1e4),D.play()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Leave called"),j.emit("leaveRoom",t),j.on("leavedRoom",(function(e){console.log("Desconectado correctamente, datos recibidos: ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function F(e,t){B=t[0].label,z=e[0]}function _(){y(z),T(B);var e=Object(c.a)(a).filter((function(e){return e.platillo.area.nombre===B}));O(e)}return Object(i.useEffect)((function(){return k&&R(k),console.log("SELECTED AREA HA CAMBIADO, ahora es:",k),function(){console.log("PREV IS: ",k),k&&I(k)}}),[k]),Object(i.useEffect)((function(){return console.log("MOUNTING OF COMANDAS COMPONENT"),function(){j.disconnect(),clearInterval(t),console.log("UNMOUNT OF COMANDAS COMPONENT")}}),[]),0!==n.length&&(P=n.map((function(e){return{value:e._id,label:e.nombre}}))),s.a.createElement("div",{className:"wrapper-comandas"},"Due\xf1o"===Object(g.a)()||"Caja"===Object(g.a)()||"Cocina"===Object(g.a)()?s.a.createElement("div",null,s.a.createElement("h1",{className:"tituloPedidos"},"COMANDAS"),s.a.createElement("div",{className:"center"},s.a.createElement("h4",null,"Elige un \xe1rea de cocina para que puedas ver las comandas"),s.a.createElement(d.a,{type:"primary",icon:s.a.createElement(p.a,null),default:!0,onClick:function(){u.a.info({title:"Cambiar \xe1rea",content:s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement(m.a,{options:P,onChange:F,placeholder:"Area..."})),onOk:function(){_()}})}},"Cambiar \xe1rea")),S&&s.a.createElement("div",{className:"center"},s.a.createElement("h4",{className:"bold"},"Area seleccionada:"),s.a.createElement("span",{className:"normal-size"},S)),s.a.createElement("div",{className:"scrolling-wrapper",ref:M},v&&v.map((function(e){return s.a.createElement(f.a,{comanda:e,onChange:F,handleModalOk:_()})}))),s.a.createElement("div",{className:"botonVerMas"},s.a.createElement(b.b,{to:"/comandas/todas"},s.a.createElement(d.a,{style:{textAlign:"center",width:120,height:50,boxShadow:"0px 3px 5px 0px grey"},id:"Button-print",type:"primary",htmlType:"button",size:"large"},"Ver todas"))),s.a.createElement("div",{className:"scrolling-wrapper"},v&&v.map((function(e){return s.a.createElement(f.a,{comanda:e,onChange:F,mostrar:!0})}))),s.a.createElement("div",{className:"botonVerMas"},s.a.createElement(b.b,{to:"/comandas/todas"},s.a.createElement(d.a,{style:{textAlign:"center",width:120,height:50,boxShadow:"0px 3px 5px 0px grey"},id:"Button-print",type:"primary",htmlType:"button",size:"large"},"Ver todas")))):null)}},208:function(e,t,a){e.exports=a(409)},260:function(e,t){},407:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),l=a(60),i=a(40);function s(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"sk-cube-grid"},r.a.createElement("div",{className:"sk-cube sk-cube1"}),r.a.createElement("div",{className:"sk-cube sk-cube2"}),r.a.createElement("div",{className:"sk-cube sk-cube3"}),r.a.createElement("div",{className:"sk-cube sk-cube4"}),r.a.createElement("div",{className:"sk-cube sk-cube5"}),r.a.createElement("div",{className:"sk-cube sk-cube6"}),r.a.createElement("div",{className:"sk-cube sk-cube7"}),r.a.createElement("div",{className:"sk-cube sk-cube8"}),r.a.createElement("div",{className:"sk-cube sk-cube9"}))))}var u=a(43),m=a(6),d=a.n(m),p=a(13),f=a(26),b=a(10),E=a(410),h=a(411),v=a(16),O=a(412),x=a(64),g=function(){var e,t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),i=Object(f.a)(l,2),s=i[0],m=i[1],g=Object(n.useState)([]),j=Object(f.a)(g,2),C=j[0],N=j[1],k=Object(n.useState)([]),y=Object(f.a)(k,2),w=y[0],A=y[1],S="",T="",M="",z=[],B=[],P=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.c)("GET","comandas?limit=1000000");case 3:return t=e.sent,a=t.data.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.c)("GET","areas");case 3:return t=e.sent,a=t.data.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.c)("GET","mesas?isActive=true");case 3:return t=e.sent,a=t.data.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return t=e.sent,o(t),e.next=6,D();case 6:return a=e.sent,m(a),e.next=10,R();case 10:n=e.sent,N(n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function F(e){S=e[0]}function _(e){T=e[0]}function L(e){M=e[0]}return Object(n.useEffect)((function(){I()}),[]),0!==s.length&&(z=s.map((function(e){return{value:e.nombre,label:e.nombre}}))),e=[{value:"En proceso",label:"En proceso"},{value:"Cerrada",label:"Cerrada"},{value:"Cancelada",label:"Cancelada"}],0!==C.length&&(B=C.map((function(e){return{value:e.noMesa,label:e.noMesa}}))),r.a.createElement("div",{className:"wrapper-comandas"},"Due\xf1o"==Object(b.a)()||"Cocina"===Object(b.a)()||"Caja"===Object(b.a)()?r.a.createElement("div",null," ",r.a.createElement("h1",{className:"tituloPedidos"}," TODAS LAS COMANDAS "),r.a.createElement("div",{className:"botonesFiltrado"},r.a.createElement(v.a,{type:"primary",icon:r.a.createElement(O.a,null),default:!0,onClick:function(){E.a.info({title:"Cambiar \xe1rea",content:r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(h.a,{options:z,onChange:F,placeholder:"Area..."})),onOk:function(){!function(){var e=Object(u.a)(c).filter((function(e){return e.platillo.area.nombre===S}));A(e)}()}})}},"Cambiar \xe1rea")),r.a.createElement("div",{className:"botonesFiltrado"},r.a.createElement(v.a,{type:"primary",icon:r.a.createElement(O.a,null),default:!0,onClick:function(){E.a.info({title:"Cambiar por estado",content:r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(h.a,{options:e,onChange:_,placeholder:"Estado..."})),onOk:function(){!function(){var e=Object(u.a)(c).filter((function(e){return e.estado===T}));A(e)}()}})}},"Cambiar estado")),r.a.createElement("div",{className:"botonesFiltrado"},r.a.createElement(v.a,{type:"primary",icon:r.a.createElement(O.a,null),default:!0,onClick:function(){E.a.info({title:"Cambiar por Mesas",content:r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(h.a,{options:B,onChange:L,placeholder:"Mesas..."})),onOk:function(){!function(){var e=Object(u.a)(c).filter((function(e){return e.orden.mesa.noMesa===M}));A(e)}()}})}},"Cambiar mesas")),r.a.createElement("div",{className:"scrolling-wrapper"},r.a.createElement("div",{className:"scrolling-wrapper"},w&&w.map((function(e){return r.a.createElement(x.a,{comanda:e,mostrar:!0})}))))):null)},j=Object(n.lazy)((function(){return Promise.all([a.e(11),a.e(26)]).then(a.bind(null,520))})),C=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(3),a.e(10),a.e(24)]).then(a.bind(null,535))})),N=Object(n.lazy)((function(){return Promise.all([a.e(2),a.e(14)]).then(a.bind(null,529))})),k=Object(n.lazy)((function(){return a.e(27).then(a.bind(null,526))})),y=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(6),a.e(19)]).then(a.bind(null,522))})),w=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(15)]).then(a.bind(null,539))})),A=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(22)]).then(a.bind(null,536))})),S=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(5),a.e(21)]).then(a.bind(null,537))})),T=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(5),a.e(16)]).then(a.bind(null,524))})),M=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(23)]).then(a.bind(null,530))})),z=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(20)]).then(a.bind(null,531))})),B=Object(n.lazy)((function(){return Promise.all([a.e(4),a.e(3),a.e(18)]).then(a.bind(null,532))})),P=Object(n.lazy)((function(){return a.e(17).then(a.bind(null,538))})),D=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(25)]).then(a.bind(null,462))})),R=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(3),a.e(12)]).then(a.bind(null,540))})),I=Object(n.lazy)((function(){return a.e(28).then(a.bind(null,523))})),F=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(6),a.e(13)]).then(a.bind(null,527))}));function _(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(s,{size:130})},r.a.createElement(l.a,null,r.a.createElement(j,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/cerrar-orden",component:y}),r.a.createElement(i.a,{exact:!0,path:"/mesas",component:C}),r.a.createElement(i.a,{exact:!0,path:"/agregar-platillos/:id",component:N}),r.a.createElement(i.a,{exact:!0,path:"/home-delivery",component:A}),r.a.createElement(i.a,{exact:!0,path:"/edit-home-delivery",component:S}),r.a.createElement(i.a,{exact:!0,path:"/",component:w}),r.a.createElement(i.a,{exact:!0,path:"/menu-dishes",component:T}),r.a.createElement(i.a,{exact:!0,path:"/areas-cocina",component:M}),r.a.createElement(i.a,{exact:!0,path:"/categorias-alimentos",component:z}),r.a.createElement(i.a,{exact:!0,path:"/ticket/:id",component:k}),r.a.createElement(i.a,{exact:!0,path:"/ver-orden/:id",component:F}),r.a.createElement(i.a,{exact:!0,path:"/ordenes-vista-general",component:P}),r.a.createElement(i.a,{exact:!0,path:"/descuento/:id",component:D}),r.a.createElement(i.a,{exact:!0,path:"/comandas",component:I}),r.a.createElement(i.a,{exact:!0,path:"/comandas/todas",render:function(){return r.a.createElement(g,{areas:[]})}}),r.a.createElement(i.a,{exact:!0,path:"/vista-usuarios",component:B}),r.a.createElement(i.a,{exact:!0,path:"/Editar-usuario",component:R}),r.a.createElement(i.a,{exact:!0,path:"/Editar-usuario/:id",component:R}))))))}var L=function(){return r.a.createElement(_,null)};a(407),a(408),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,a){"use strict";var n=a(6),r=a.n(n),c=a(13),o=a(0),l=a.n(o),i=a(188),s=a.n(i),u=a(125),m=a(16),d=a(31),p=a.n(d),f=a(10);a(206);t.a=function(e){var t=e.comanda,a=e.noMesa,n=e.mostrar;e.handleModalOk,a=a||t.orden.mesa.noMesa,console.log("DATA for comanda and mesa ",t,a),Object(o.useEffect)((function(){console.log("useEffect")}));var i=function(){var e=Object(c.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.c)("PUT","comandas/".concat(t._id),{platillo:t.platillo._id,cantidad:t.cantidad,estado:"Cerrada",observaciones:t.observaciones,orden:t.orden._id});case 3:return a=e.sent,n=a.data.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.c)("PUT","comandas/".concat(t._id),{platillo:t.platillo._id,cantidad:t.cantidad,estado:"Cancelada",observaciones:t.observaciones,orden:t.orden._id});case 3:return a=e.sent,n=a.data.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"card-comanda"},l.a.createElement("div",{className:"card-containr-comanda"},l.a.createElement("div",{className:"center"},l.a.createElement("img",{className:"imgRedonda",src:s.a,alt:"Camarones"})),l.a.createElement("h1",{className:"titulo-orden"},t.platillo.nombre),l.a.createElement("br",null),"Cerrada"===t.estado?l.a.createElement("p",{className:"texto-orden"},l.a.createElement("td",null,l.a.createElement(u.a,{color:"success"},t.estado))):"En proceso"===t.estado?l.a.createElement("td",null,l.a.createElement("p",{className:"texto-orden"},l.a.createElement(u.a,{color:"warning"},t.estado))):l.a.createElement("p",{className:"texto-orden"},l.a.createElement("td",null,l.a.createElement(u.a,{color:"error"},t.estado))),l.a.createElement("br",null),l.a.createElement("p",{className:"texto-orden"},l.a.createElement("b",null,"Cantidad:")," ",t.cantidad),l.a.createElement("br",null),l.a.createElement("p",{className:"texto-orden"},l.a.createElement("b",null,"Mesa:")," ",a),l.a.createElement("br",null),l.a.createElement("p",{className:"texto-orden"},l.a.createElement("b",null,"fecha:")," ",t.fecha),l.a.createElement("br",null),l.a.createElement("p",{className:"texto-orden"},l.a.createElement("b",null,"Observaciones:")," ",t.observaciones),n&&("En proceso"===t.estado?l.a.createElement("div",{className:"containerBotonesComandas"},l.a.createElement(m.a,{style:{textAlign:"center",width:100,height:40,boxShadow:"0px 3px 5px 0px grey",margin:"2px"},id:"Button-print",type:"dashed",htmlType:"button",size:"large",onClick:function(){p.a.fire({title:"\xbfEst\xe1s seguro cerrarla?",text:"\xa1No podras revertir est\xe1 acci\xf3n!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, \xa1ci\xe9rrala!",cancelButtonText:"Cancelar"}).then((function(e){e.value&&(console.log("COMANDA CERRADA EXITOSAMENTE"),i())}))}},"Cerrar"),l.a.createElement(m.a,{style:{textAlign:"center",width:100,height:40,boxShadow:"0px 3px 5px 0px grey",margin:"2px"},id:"Button-print",type:"danger",htmlType:"button",size:"large",onClick:function(){p.a.fire({title:"\xbfEst\xe1s seguro cancelarla?",text:"\xa1No podras revertir est\xe1 acci\xf3n!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, \xa1canc\xe9lala!",cancelButtonText:"Cancelar"}).then((function(e){e.value&&(console.log("COMANDA CANCELADA EXITOSAMENTE"),d())}))}},"Cancelar")):null)||null))}},89:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),t.b={apiEndPoint:"https://posrestfront4d.herokuapp.com/api/v1/"};var n={url:"https://posrestfront4d.herokuapp.com"}},92:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return l}));var n=a(31),r=a.n(n);function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};r.a.fire({icon:"error",title:e,text:t}).then((function(e){e.value&&a()}))}function o(e,t){r.a.fire({icon:"success",title:e,text:t})}function l(e,t,a,n,c){r.a.fire({title:e,text:t,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then((function(e){e.value&&(r.a.fire(a,n,"success"),c())}))}}},[[208,8,9]]]);
//# sourceMappingURL=main.7f98f8ed.chunk.js.map