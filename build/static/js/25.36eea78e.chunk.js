(this.webpackJsonpposrestfront=this.webpackJsonpposrestfront||[]).push([[25],{413:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var n=a(31),r=a.n(n);function c(e){r.a.fire({icon:"error",title:"Error",text:e})}function l(e){r.a.fire({icon:"success",title:"Proceso exitoso!",text:e})}},462:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a.n(n),c=a(13),l=a(26),o=a(0),s=a.n(o),i=a(528),u=a(16),m=a(410),p=a(202),b=a(10),f=a(413),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar-circle",theme:"outlined"},d=a(127),j=function(e,t){return o.createElement(d.a,Object.assign({},e,{ref:t,icon:v}))};j.displayName="DollarCircleOutlined";var E=o.forwardRef(j);t.default=function(e){var t=e.orderId,a=e.total,n=Object(o.useState)({visible:!1}),v=Object(l.a)(n,2),d=v[0],j=v[1],h=Object(o.useState)(0),O=Object(l.a)(h,2),g=O[0],k=O[1],y=Object(o.useState)(0),C=Object(l.a)(y,2),w=C[0],x=C[1],D=t,V=i.a.useForm(),z=Object(l.a)(V,1)[0],P=function(){j({visible:!1}),S(g)},N=function(){j({visible:!1}),k(0),z.setFieldsValue({porcentaje:0})};Object(o.useEffect)((function(){x(a-g*a/100)}),[g]);var S=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.c)("PUT","ordenes/".concat(D),{pago:{porcentajeDescuento:t}});case 3:a=e.sent,console.log(a),a&&a.status&&200===a.status?Object(f.b)("Descuento aplicado correctamente"):Object(f.a)("Hubo un error al aplicar el descuento"),k(0),z.setFieldsValue({porcentaje:0}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),Object(f.a)(e.t0.error);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(u.a,{shape:"circle",className:"discount-btn",onClick:function(){j({visible:!0})}},s.a.createElement(E,{className:"normal-size"})),s.a.createElement("p",null,"Agregar descuento"),s.a.createElement(m.a,{title:"Descuento",visible:d.visible,onOk:P,onCancel:N,footer:[s.a.createElement(u.a,{key:"back",onClick:N,type:"primary",danger:!0},"Cancelar"),s.a.createElement(u.a,{key:"submit",type:"primary",onClick:P},"Aceptar")]},s.a.createElement("div",{className:"Descuentos"},s.a.createElement(i.a,{form:z,name:"Discounts",initialValues:{remember:!0}},s.a.createElement(i.a.Item,{name:"porcentaje",label:"% Porcentaje a Descontar",rules:[{required:!0,message:"Por favor ingresa un porcentaje correcto",whitespace:!0,validator:function(e,t){return t>=0&&t<=100?Promise.resolve():Promise.reject("El porcentaje debe ser entre 0 y 100")}}]},s.a.createElement(p.a,{type:"number",onChange:function(e){k(e.target.value)},value:g}))),s.a.createElement("p",null),s.a.createElement("p",null,"Total anterior $",a),s.a.createElement("hr",null),s.a.createElement("p",null),s.a.createElement("p",null,"Total nuevo $",w)))))}}}]);
//# sourceMappingURL=25.36eea78e.chunk.js.map