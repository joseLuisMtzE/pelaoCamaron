{"version":3,"sources":["../node_modules/babel-runtime/helpers/objectWithoutProperties.js","components/CloseOrder/ModalCloseOrder.jsx","components/CloseOrder/CloseOrder.jsx","pages/CloseOrderPage.jsx"],"names":["exports","__esModule","default","obj","keys","target","i","indexOf","Object","prototype","hasOwnProperty","call","CloseOrder","props","loading","total","cambio","onFinishForm","Option","Select","Form","useForm","form","useEffect","setFieldsValue","porcentajeDescuento","name","onFinish","values","console","log","onFinishFailed","errorInfo","Item","label","rules","required","message","placeholder","value","prefix","suffix","Numeral","format","type","htmlType","ModalCloseAC","id","ordenTotal","useState","modalVisible","setModalVisible","setLoading","setCambio","closeOrderAndGetTicket","payload","a","makeRequest","response","data","successAlert","errorAlert","className","shape","onClick","CloseOutlined","title","visible","onCancel","footer","ModalCloseOrder","tipoPago","parseInt","pagoCon","parseFloat","subTotal","CloseOrderPage"],"mappings":"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","file":"static/js/19.f0a24cd6.chunk.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};","import React, { useEffect } from 'react';\r\nimport * as Numeral from 'numeral';\r\nimport { Form, Button, Select, Input } from 'antd';\r\n\r\nconst CloseOrder = props => {\r\n  const { loading, total, cambio, onFinishForm } = props;\r\n  const { Option } = Select;\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue({ porcentajeDescuento: '0' });\r\n  });\r\n\r\n  const onFinish = values => {\r\n    console.log('Success:', values);\r\n    onFinishForm(values);\r\n  };\r\n\r\n  const onFinishFailed = errorInfo => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form\r\n        name=\"paymentInfo\"\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        form={form}\r\n      >\r\n        <Form.Item\r\n          label=\"Forma de pago\"\r\n          name=\"tipoPago\"\r\n          rules={[{ required: true, message: 'Elije una forma de pago!' }]}\r\n        >\r\n          <Select placeholder=\"Selecciona un método de pago\">\r\n            <Option value=\"Efectivo\">Efectivo</Option>\r\n            <Option value=\"Tarjeta\">Tarjeta</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"Pagó con:\"\r\n          name=\"pagoCon\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa la cantidad con la que te pagó el cliente!'\r\n            }\r\n          ]}\r\n        >\r\n          <Input\r\n            placeholder=\"Cantidad con la que pagó el cliente\"\r\n            prefix=\"$\"\r\n            suffix=\"MXN\"\r\n          />\r\n        </Form.Item>\r\n        <Form.Item label=\"\" name=\"porcentajeDescuento\">\r\n         \r\n        </Form.Item>\r\n        <h3>Total: {Numeral(total).format('$0,0.00')}</h3>\r\n        <h3>Cambio: {Numeral(cambio).format('$0,0.00')}</h3>\r\n\r\n        <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n          Pagar\r\n        </Button>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CloseOrder;\r\n","import React, { useState } from 'react';\r\n\r\n//! Components\r\nimport ModalCloseOrder from './ModalCloseOrder';\r\nimport { Modal, Button } from 'antd';\r\n\r\n//! Constants\r\n// import url from '../../constants/api';\r\n\r\nimport { errorAlert, successAlert } from '../../shared/Alerts';\r\n\r\nimport { CloseOutlined } from '@ant-design/icons';\r\nimport { makeRequest } from '../../shared/ApiWrapper';\r\n\r\nfunction ModalCloseAC({ id, ordenTotal }) {\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [cambio, setCambio] = useState(0);\r\n  const total = ordenTotal;\r\n\r\n  const closeOrderAndGetTicket = async (id, payload) => {\r\n    try {\r\n      setLoading(true);\r\n      let response = await makeRequest('POST', `ordenes/${id}/ticket`, payload);\r\n      let data = response.data.data;\r\n      console.log('Response: ', response, 'Data: ', data);\r\n      setLoading(false);\r\n      successAlert('Pago realizado', 'Generando ticket...');\r\n    } catch (err) {\r\n      setLoading(false);\r\n      errorAlert('Oops...', 'Algo salió mal al generar el ticket verifica que las ordenes estén cerradas');\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setModalVisible(false);\r\n  };\r\n\r\n  const onFinishForm = values => {\r\n    console.log('Form submitted, values recieved are: ', values);\r\n    closeOrderAndGetTicket(id, {\r\n      tipoPago: values.tipoPago,\r\n      porcentajeDescuento: parseInt(values.porcentajeDescuento),\r\n      pagoCon: parseFloat(values.pagoCon),\r\n      subTotal: total\r\n    });\r\n    setCambio(\r\n      parseFloat(values.pagoCon) -\r\n        total * (1 - parseInt(values.porcentajeDescuento) / 100)\r\n    );\r\n  };\r\n\r\n  //--------FORM\r\n  return (\r\n    <>\r\n      {/* <div className=\"close-order__wrapper\"> */}\r\n      {/* <Button\r\n          type=\"primary\"\r\n          className=\"close-order_btn\"\r\n          onClick={() => {\r\n            setModalVisible(true);\r\n          }}\r\n        >\r\n          Cerrar cuenta\r\n        </Button> */}\r\n      <div className=\"center\">\r\n        <Button\r\n          shape=\"circle\"\r\n          className=\"close-btn\"\r\n          onClick={() => {\r\n            setModalVisible(true);\r\n          }}\r\n        >\r\n          <CloseOutlined className=\"normal-size\" />\r\n        </Button>\r\n        <p>Cerrar orden </p>\r\n      </div>\r\n      <Modal\r\n        title=\"CERRAR ORDEN\"\r\n        visible={modalVisible}\r\n        onCancel={handleCancel}\r\n        footer={''}\r\n      >\r\n        <ModalCloseOrder\r\n          total={total}\r\n          cambio={cambio}\r\n          loading={loading}\r\n          onFinishForm={onFinishForm}\r\n        />\r\n      </Modal>\r\n      {/* </div> */}\r\n    </>\r\n  );\r\n}\r\nexport default ModalCloseAC;\r\n","import React from 'react';\r\nimport CloseOrder from '../components/CloseOrder/CloseOrder';\r\nconst CloseOrderPage = () => {\r\n  return (\r\n    <>\r\n      <CloseOrder />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CloseOrderPage;\r\n"],"sourceRoot":""}